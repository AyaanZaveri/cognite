import p from"node:fs";import d from"node:path";import f from"node:https";function a(...e){}var l=m(),v=async e=>{for(let r of e.Records){let{host:n,url:t}=JSON.parse(r.body);a("Revalidating stale page",{host:n,url:t}),await new Promise((i,c)=>{let s=f.request(`https://${n}${t}`,{method:"HEAD",headers:{"x-prerender-revalidate":l.preview.previewModeId}},o=>i(o));s.on("error",o=>c(o)),s.end()})}};function m(){let e=d.join("prerender-manifest.json"),r=p.readFileSync(e,"utf-8");return JSON.parse(r)}export{v as handler};
